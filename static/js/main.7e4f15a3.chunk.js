(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{179:function(e,t,n){e.exports=n(265)},265:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(38),l=n.n(o),i=n(43),c=n(88),u=n(89),s=n(101),m=n(90),d=n(103),p=n(5),f=n(40),g=(n(187),n(158)),h=n(159),E=n.n(h);function b(){var e=Object(g.a)(["\n  ","\n  \n  * {\n    box-sizing: border-box;\n  }\n\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  ul,\n  ol,\n  li {\n    display: block;\n    padding: 0;\n    margin: 0;\n  }\n"]);return b=function(){return e},e}var _=Object(p.createGlobalStyle)(b(),E.a),y=n(267),O=p.default.div.withConfig({displayName:"Loader__Container",componentId:"utmanw-0"})(["height:100vh;display:flex;justify-content:center;align-items:center;"]),v=function(){return r.a.createElement(O,null,r.a.createElement(y.a,{size:"large",tip:"Loading..."}))},w=n(131),S=n(165),I=n.n(S).a.create({baseURL:"https://conduit.productionready.io/api"}),x=function(){return localStorage.removeItem("token"),delete I.defaults.headers.common.Authorization,{type:"LOGOUT"}},j=p.default.div.withConfig({displayName:"NavBar__StyledNavBar",componentId:"f35ajf-0"})(["width:100%;display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center;"]),C=Object(p.default)(f.b).withConfig({displayName:"NavBar__Logo",componentId:"f35ajf-1"})(["font-weight:bold;color:white;font-size:25px;:hover{color:black;}"]),L=p.default.ul.withConfig({displayName:"NavBar__Menu",componentId:"f35ajf-2"})(["display:flex;"]),N=p.default.li.withConfig({displayName:"NavBar__MenuItem",componentId:"f35ajf-3"})(["display:flex;align-items:center;margin-right:30px;:last-child{margin-right:0;}"]),U=Object(p.default)(f.c).withConfig({displayName:"NavBar__StyledNavLink",componentId:"f35ajf-4"})(["color:white;:hover{color:black;}"]),k=function(e){var t=e.isAutheticated,n=e.user,a=e.authLogout;return r.a.createElement(j,null,r.a.createElement(C,{to:"/blog"},"Blog"),r.a.createElement(L,null,t?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null,r.a.createElement(U,{to:"/blog",exact:!0},"Home")),r.a.createElement(N,null,r.a.createElement(U,{to:"/blog/login"},"Sign in")),r.a.createElement(N,null,r.a.createElement(U,{to:"/blog/signup"},"Sign up"))),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null,r.a.createElement(w.a,{onClick:function(){a()}},"Log out")),r.a.createElement(N,null,r.a.createElement("span",null,n))):null))};k.defaultProps={user:null};var A=Object(i.b)((function(e){var t=e.auth;return{isAutheticated:!!t.currentUser.token,user:t.currentUser.username}}),(function(e){return{authLogout:function(){return e(x())}}}))(k),R=n(50),T=n(268),G=n(23),z=n(130),F=n(80),B=n(32),q=n.n(B),D=n(72),M=function(e){return{type:"REGISTER_SUCCESS",user:e}},P=function(e){return{type:"REGISTER_FAILURE",errors:e}},Q=function(e){return{type:"LOGIN_SUCCESS",user:e}},X=function(e){return{type:"LOGIN_FAILURE",errors:e}},H=p.default.div.withConfig({displayName:"Authentication__StyledAuthentication",componentId:"sc-102kihz-0"})(["display:flex;justify-content:center;"]),V=p.default.div.withConfig({displayName:"Authentication__Container",componentId:"sc-102kihz-1"})(["width:320px;display:flex;flex-direction:column;"]),Z=p.default.h1.withConfig({displayName:"Authentication__PageTitle",componentId:"sc-102kihz-2"})(["color:#1890ff;font-size:40px;text-align:center;margin:20px 0;"]),J=p.default.p.withConfig({displayName:"Authentication__DescriptionLink",componentId:"sc-102kihz-3"})(["font-size:16px;text-align:center;"]),$=p.default.div.withConfig({displayName:"Authentication__FormItem",componentId:"sc-102kihz-4"})(["margin-bottom:20px;"]),K=p.default.div.withConfig({displayName:"Authentication__ErrorMessage",componentId:"sc-102kihz-5"})(["color:red;"]),W=F.a().shape({username:F.b().max(50,"Too Long!").required("Required"),email:F.b().email("Invalid email").required("Required"),password:F.b().matches(/^(?=^.{8,40}$)[0-9a-zA-Z](?=.*[A-Z])(?=.*[0-9])/,"The password has to contain: A-Z, a-z, 0-9").required("Required")}),Y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFormSubmit=function(e,t){var a=n.props,r=a.authLogin,o=a.authRegister;t?o(e):r(e)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.match,a=t.isAuthenticated,o=t.isLoading,l="/blog/signup"===n.path,i=l?"Sign Up":"Sign In",c=l?"/blog/login":"/blog/signup",u=l?"Have an account?":"Need an account?";return a?r.a.createElement(R.a,{to:"/blog"}):r.a.createElement(H,null,r.a.createElement(V,null,r.a.createElement(Z,null,i),r.a.createElement(J,null,r.a.createElement(f.b,{to:c},u)),r.a.createElement(z.b,{initialValues:{username:"noname-2020",email:"noname-2020@mail.com",password:"8Nkl8dsp"},onSubmit:function(t){return e.handleFormSubmit(t,l)},validationSchema:W},(function(e){var t=e.handleSubmit,n=e.values,a=e.handleChange,c=e.handleBlur,u=e.touched,s=e.errors;return r.a.createElement(z.a,{onSubmit:t},l&&r.a.createElement($,null,r.a.createElement(T.a,{type:"user",name:"username",placeholder:"Username",value:n.username,onChange:a,onBlur:c,prefix:r.a.createElement(G.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}})}),u.username&&s.username&&r.a.createElement(K,null,s.username)),r.a.createElement($,null,r.a.createElement(T.a,{type:"email",name:"email",placeholder:"Email",value:n.email,onChange:a,onBlur:c,prefix:r.a.createElement(G.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}})}),u.email&&s.email&&r.a.createElement(K,null,s.email)),r.a.createElement($,null,r.a.createElement(T.a,{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:a,onBlur:c,prefix:r.a.createElement(G.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}),u.password&&s.password&&r.a.createElement(K,null,s.password)),r.a.createElement(w.a,{type:"primary",htmlType:"submit",loading:o,block:!0},i))}))))}}]),t}(a.Component),ee=Object(i.b)((function(e){var t=e.auth;return{isAuthenticated:!!t.currentUser.token,isLoading:t.loading}}),(function(e){return{authLogin:function(t){return e(function(e){var t=e.email,n=e.password;return(function(){var e=Object(D.a)(q.a.mark((function e(a){var r,o,l,i,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_REQUEST"}),r={user:{email:t,password:n}},e.prev=2,e.next=5,I.post("/users/login/",r);case 5:return o=e.sent,e.next=8,o.data.user;case 8:return l=e.sent,e.next=11,l.token;case 11:i=e.sent,localStorage.setItem("token",i),a(Q(l)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),c=e.t0.response.data.errors,a(X(c));case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}())}(t))},authRegister:function(t){return e(function(e){var t=e.username,n=e.email,a=e.password;return(function(){var e=Object(D.a)(q.a.mark((function e(r){var o,l,i,c,u;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"REGISTER_REQUEST"}),o={user:{username:t,email:n,password:a}},e.prev=2,e.next=5,I.post("/users/",o);case 5:return l=e.sent,e.next=8,l.data.user;case 8:return i=e.sent,e.next=11,i.token;case 11:c=e.sent,localStorage.setItem("token",c),r(M(i)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),u=e.t0.response.data.errors,r(P(u));case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}())}(t))}}}))(Y),te=function(){return r.a.createElement("div",null,"GlobalFeed")},ne=p.default.main.withConfig({displayName:"Content__StyledContent",componentId:"sc-1fbqzez-0"})(["padding:0 20px;"]),ae=function(){return r.a.createElement(ne,null,r.a.createElement(R.d,null,r.a.createElement(R.b,{path:"/blog",component:te,exact:!0}),r.a.createElement(R.b,{path:"/blog/login",component:ee}),r.a.createElement(R.b,{path:"/blog/signup",component:ee})))},re=function(e){return{type:"AUTO_LOGIN_SUCCESS",user:e}},oe=p.default.div.withConfig({displayName:"App__Page",componentId:"sc-1to29a3-0"})(["width:1100px;margin:0 auto;"]),le=p.default.header.withConfig({displayName:"App__Header",componentId:"sc-1to29a3-1"})(["height:60px;display:flex;flex-wrap:nowrap;align-items:center;background:#1890ff;color:#ffffff;padding:0 20px;"]),ie=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){(0,n.props.authAutoLogin)()},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement(f.a,null,r.a.createElement(oe,null,e?r.a.createElement(v,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null,r.a.createElement(A,null)),r.a.createElement(ae,null)))))}}]),t}(a.Component),ce=Object(i.b)((function(e){return{isLoading:e.auth.loading}}),(function(e){return{authAutoLogin:function(){return e(function(){var e=Object(D.a)(q.a.mark((function e(t){var n,a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("token"))){e.next=18;break}return t({type:"AUTO_LOGIN_REQUEST"}),I.defaults.headers.common.Authorization="Token ".concat(n),e.prev=4,e.next=7,I("/user/");case 7:return a=e.sent,e.next=10,a.data.user;case 10:r=e.sent,console.log(r),t(re(r)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t({type:"AUTO_LOGIN_FAILURE"});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}())}}}))(ie),ue=n(47),se=n(175),me=n(24),de={currentUser:{},loading:!1},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_REQUEST":return Object(me.a)({},e,{loading:!0});case"REGISTER_SUCCESS":return Object(me.a)({},e,{currentUser:t.user,loading:!1});case"REGISTER_FAILURE":return Object(me.a)({},e,{loading:!1});case"LOGIN_REQUEST":return Object(me.a)({},e,{loading:!0});case"LOGIN_SUCCESS":return Object(me.a)({},e,{currentUser:t.user,loading:!1});case"LOGIN_FAILURE":return Object(me.a)({},e,{loading:!1});case"AUTO_LOGIN_REQUEST":return Object(me.a)({},e,{loading:!0});case"AUTO_LOGIN_SUCCESS":return Object(me.a)({},e,{currentUser:t.user,loading:!1});case"AUTO_LOGIN_FAILURE":return Object(me.a)({},e,{loading:!1});case"LOGOUT":return Object(me.a)({},e,{currentUser:{}});default:return e}},fe=Object(ue.c)({auth:pe}),ge="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ue.d,he=Object(ue.e)(fe,ge(Object(ue.a)(se.a)));l.a.render(r.a.createElement(i.a,{store:he},r.a.createElement(ce,null)),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.7e4f15a3.chunk.js.map